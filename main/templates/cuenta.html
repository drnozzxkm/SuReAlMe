{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi cuenta</title>
  <link rel="icon" href="{% static 'img/favicon.png' %}" type="image/png">
  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
  <header class="navbar">
    <span class="project-name">Superando Retos, Alcanzando Metas</span>
    <div class="nav-right">
      <div class="user-menu">
        <a href="{% url 'home' %}" class="nav-link">Inicio</a>
        <a href="{% url 'comentarios' %}" class="nav-link">Comentarios</a> 
        <a href="{% url 'logout' %}" class="logout-btn">Salir</a>
      </div>
    </div>
  </header>

  <section class="account-section">
    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="account-container">
        <!-- LADO IZQUIERDO: FOTO -->
        <div class="account-left">
          <div class="profile-pic">
            {% if user.foto_perfil %}
              <img src="{{ user.foto_perfil.url }}" alt="Foto de perfil">
            {% else %}
              <img src="{% static 'img/default_profile.png' %}" alt="Foto por defecto">
            {% endif %}
          </div>
          <p class="change-text">Cambia tu foto de perfil aquí</p>
          <input type="file" name="foto_perfil" accept="image/*" class="input-foto">
        </div>

        <!-- LADO DERECHO: INFORMACIÓN -->
        <div class="account-right">
          <h2>Información de la cuenta</h2>
          <div class="form-group">
            <label for="username">Nombre de usuario</label>
            <input type="text" name="username" value="{{ user.username }}">
          </div>
          <div class="form-group">
            <label for="email">Correo electrónico</label>
            <input type="email" name="email" value="{{ user.email }}" disabled>
          </div>
          <div class="form-group">
            <label for="password">Contraseña</label>
            <input type="password" name="password" placeholder="Nueva contraseña">
          </div>
          <div class="form-group">
            <label for="rol">Rol</label>
            <input type="text" name="rol" value="{{ user.rol }}" disabled>
          </div>
          <button type="submit" class="btn-guardar">Guardar cambios</button>
        </div>
      </div>
    </form>
  </section>
  <!-- SCRIPT PARA PREVISUALIZAR FOTO DE PERFIL -->
  <script>
    document.querySelector('.input-foto').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.querySelector('.profile-pic img').src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>
</html>

<!-- terminar y aliniar la pagina xd-->